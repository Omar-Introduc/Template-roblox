-- Lobby Island and Deadly Ocean Setup Script (MEJORADO)
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")

-- ConfiguraciÃ³n
local LOBBY_SIZE = 80
local WALL_HEIGHT = 3

-- FunciÃ³n para crear una pared
local function createWall(position, size, parent)
	local wall = Instance.new("Part")
	wall.Name = "LobbyWall"
	wall.Size = size
	wall.Position = position
	wall.Anchored = true
	wall.BrickColor = BrickColor.new("Dark stone grey")
	wall.Material = Enum.Material.Concrete
	wall.Transparency = 0.2
	wall.Parent = parent
end

-- FunciÃ³n para crear el Lobby con seguridad
local function createLobbyIsland()
	-- 1. Crear el suelo de la isla
	local lobbyIsland = Instance.new("Part")
	lobbyIsland.Name = "Lobby"
	lobbyIsland.Size = Vector3.new(LOBBY_SIZE, 2, LOBBY_SIZE)
	lobbyIsland.Position = Vector3.new(0, 0, 0) -- Top surface at Y=1 (thickness 2)
	lobbyIsland.Anchored = true
	lobbyIsland.BrickColor = BrickColor.new("Bright green")
	lobbyIsland.Material = Enum.Material.Grass
	lobbyIsland.Parent = Workspace

	-- 2. Crear paredes alrededor (para que sea seguro)
	local halfSize = LOBBY_SIZE / 2
	local wallThick = 1
	-- Pared Norte
	createWall(Vector3.new(0, WALL_HEIGHT/2, -halfSize), Vector3.new(LOBBY_SIZE, WALL_HEIGHT, wallThick), lobbyIsland)
	-- Pared Sur
	createWall(Vector3.new(0, WALL_HEIGHT/2, halfSize), Vector3.new(LOBBY_SIZE, WALL_HEIGHT, wallThick), lobbyIsland)
	-- Pared Este
	createWall(Vector3.new(halfSize, WALL_HEIGHT/2, 0), Vector3.new(wallThick, WALL_HEIGHT, LOBBY_SIZE), lobbyIsland)
	-- Pared Oeste
	createWall(Vector3.new(-halfSize, WALL_HEIGHT/2, 0), Vector3.new(wallThick, WALL_HEIGHT, LOBBY_SIZE), lobbyIsland)

	-- 3. SpawnLocation (Visible and functional)
	local spawnLocation = Instance.new("SpawnLocation")
	spawnLocation.Name = "LobbySpawn"
	spawnLocation.Size = Vector3.new(10, 0.5, 10)
	spawnLocation.Position = Vector3.new(0, 1.25, 0) -- Sitting on top of Lobby (Y=1)
	spawnLocation.Anchored = true
	spawnLocation.BrickColor = BrickColor.new("Gold")
	spawnLocation.Material = Enum.Material.Neon
	spawnLocation.Transparency = 0.2
	spawnLocation.CanCollide = true
	spawnLocation.Duration = 3
	spawnLocation.Parent = Workspace
	
	-- SelectionBox for extra detail
	local selectionBox = Instance.new("SelectionBox")
	selectionBox.Adornee = spawnLocation
	selectionBox.Color3 = Color3.new(1, 1, 0)
	selectionBox.Parent = spawnLocation

	print("âœ… Lobby Spawn (Dorado) integrado.")

	print("âœ… Lobby Island (con seguridad) creada.")
end

-- FunciÃ³n para crear el OcÃ©ano Mortal
local function createDeadlyOcean()
	local deadlyOcean = Instance.new("Part")
	deadlyOcean.Name = "DeadlyOcean"
	deadlyOcean.Size = Vector3.new(2048, 8, 2048) -- Un poco mÃ¡s grueso
	deadlyOcean.Position = Vector3.new(0, -25, 0) -- MÃ¡s abajo para dar espacio de caÃ­da
	deadlyOcean.Anchored = true
	deadlyOcean.CanCollide = false
	deadlyOcean.BrickColor = BrickColor.new("Deep blue")
	deadlyOcean.Material = Enum.Material.Water
	deadlyOcean.Transparency = 0.4
	deadlyOcean.Reflectance = 0.3 -- Un poco de brillo
	deadlyOcean.Parent = Workspace

	-- LÃ³gica de muerte DIRECTA (sin crear otro script)
	deadlyOcean.Touched:Connect(function(hit)
		local character = hit.Parent
		local humanoid = character:FindFirstChild("Humanoid")
		
		if humanoid and humanoid.Health > 0 then
			print("ğŸŒŠ Jugador cayÃ³ al agua: " .. character.Name)
			humanoid.Health = 0 -- Muerte instantÃ¡nea
		end
	end)

	print("âœ… OcÃ©ano Mortal activado.")
end

local function cleanupBaseplate()
	local baseplate = Workspace:FindFirstChild("Baseplate")
	if baseplate then
		baseplate:Destroy()
		print("ğŸ—‘ï¸ Baseplate eliminado.")
	end
end

-- EjecuciÃ³n principal
local function setupGameEnvironment()
	print("ğŸ› ï¸ Iniciando configuraciÃ³n del entorno...")
	
	cleanupBaseplate()
	createLobbyIsland()
	createDeadlyOcean()
	
	-- Ajuste de iluminaciÃ³n bÃ¡sico para que se vea mejor
	Lighting.Ambient = Color3.fromRGB(150, 150, 150)
	Lighting.Brightness = 2.5
	
	print("âœ¨ Entorno listo. Â¡A saltar!")
end

setupGameEnvironment()